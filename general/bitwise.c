#include <stdio.h>

unsigned getbits(unsigned x, int p, int n);

int main()
{
        int x = 9;
        printf("%d\n", x >> 2);
        return 0;
}

unsigned getbits(unsigned x, int p, int n)
{
        return (x >> (p+1-n)) & ~(~0 << n);
}

/* Example 1:
 * 4 >> (4+1-3):
 * 4 >> 2
 * 00000100 -> 2
 * 00000001
 *
 * (~0 << 3):
 * ~0 = 11111111
 *
 * 11111111 << 3
 * 11111000
 *
 * ~():
 * 11111000
 * 00000111
 *
 * () & ~()
 *   00000001
 * & 00000111
 * ----------
 *   00000001 = 1
 *
 * 9 >> (4+1-3):
 * 9 >> 2
 * 00001001 -> 2
 * 00000010
 *
 * () & ~()
 * 00000010
 * 00000111
 * --------
 * 00000010 */
